openapi: 3.1.1
info:
  title: Reading Diary Source
  description: Fetches diary index metadata and year chunks from GitHub raw.
  version: "1.1"
servers:
  - url: https://raw.githubusercontent.com
paths:
  /robert-rollings/reading_diary/main/diary/index.json:
    get:
      operationId: getDiaryIndex
      summary: Get the diary metadata index
      responses:
        "200":
          description: JSON metadata index
          content:
            application/json:
              schema:
                type: object
                required:
                  - entries
                  - series_table
                  - meta
                properties:
                  entries:
                    type: array
                    description: Per-book index entries derived from the diary.
                    items:
                      type: object
                      required:
                        - id
                        - title
                        - author
                        - year
                        - month
                        - ratingStars
                        - source
                      properties:
                        id:
                          type: string
                        title:
                          type: string
                        author:
                          type: string
                        year:
                          type: integer
                        month:
                          type: integer
                        monthName:
                          type: string
                        dateFinished:
                          type: string
                          nullable: true
                        ratingStars:
                          type: integer
                          minimum: 0
                          maximum: 5
                        tags:
                          type: array
                          items:
                            type: string
                        series:
                          type: object
                          nullable: true
                          properties:
                            name:
                              type: string
                            number:
                              type: integer
                        source:
                          type: object
                          required:
                            - file
                            - anchor
                          properties:
                            file:
                              type: string
                            anchor:
                              type: string
                  series_table:
                    type: array
                    description: Parsed series table at top of diary.
                    items:
                      type: object
                      required:
                        - seriesName
                        - author
                        - ratingStars
                        - reviewText
                      properties:
                        seriesName:
                          type: string
                        author:
                          type: string
                        ratingStars:
                          type: integer
                          minimum: 0
                          maximum: 5
                        reviewText:
                          type: string
                  meta:
                    type: object
                    description: Index metadata and generation info.
                    properties:
                      generatedAt:
                        type: string
                      sourceFile:
                        type: string
  /robert-rollings/reading_diary/main/diary/years/{year}.md:
    get:
      operationId: getDiaryYear
      summary: Get a single year chunk of the diary
      parameters:
        - in: path
          name: year
          required: true
          schema:
            type: string
          description: Four-digit year, e.g. 2025
      responses:
        "200":
          description: Markdown content for the year
          content:
            text/plain:
              schema:
                type: string
